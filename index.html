<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>불방 인터렉티브</title>
    <meta
      name="description"
      content="불방 인터렉티브 - 게임, 영상, 2D/3D 모델링, 웹개발 창작 듀오"
    />
    <meta
      name="keywords"
      content="불방, BoolBang, 인터렉티브, 게임, 영상제작, 드로잉, 말시민, 경마 유튜브, 모델링, 유튜브영상제작, 홍보영상, 디지털 아트, 불방위키, 웹개발"
    />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://www.boolbang.com/" />

    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="불방 인터렉티브" />
    <meta
      property="og:title"
      content="BoolBang Interactive - 디지털 창작 실험실"
    />
    <meta
      property="og:description"
      content="게임, 영상, 2D/3D 모델링, 웹개발 창작 듀오"
    />
    <meta property="og:url" content="https://www.boolbang.com/" />
    <meta
      property="og:image"
      content="https://www.boolbang.com/images/logo_card.webp"
    />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="불방 인터렉티브" />
    <meta
      name="twitter:description"
      content="게임, 영상, 2D/3D 모델링, 웹개발 창작 듀오"
    />
    <meta
      name="twitter:image"
      content="https://www.boolbang.com/images/logo_card.webp"
    />

    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/style3.css" />
    <link rel="icon" href="../images/pavicon.png" type="image/png" />
  </head>
  <body>
    <div class="main-container">
      <header class="main-header">
        <h1 style="font-size: 1.5rem; color: #000000; font-weight: normal">
          불방 인터랙티브
        </h1>
        <p style="color: #000000; font-size: 15.2px">영상과 코딩 하는 듀오.</p>
      </header>

      <section
        class="intro-section"
        style="border-left: none; margin-bottom: 0"
      >
        <p style="color: #000000; font-size: 15.2px">
          const office = { "kr-seoul": "서울시 영등포구 국제금융로",
          "kr-gyeonggi-do": "경기도 성남시 분당구 판교역로" };
        </p>
      </section>

      <section class="nav-section" style="margin: 30px 0">
        <p
          style="
            margin-top: 10px;
            margin-bottom: 0;
            color: #000000;
            font-size: 0.95rem;
            line-height: 1.8;
          "
        >
          Languages & Frameworks<br />
          C++, JavaScript (React, Next.js), SQL 등
        </p>
        <p
          style="
            margin-top: 10px;
            margin-bottom: 0;
            color: #000000;
            font-size: 0.95rem;
            line-height: 1.8;
          "
        >
          Creative Tools<br />
          Adobe Premiere Pro (Pr), DaVinci Resolve (Resolve), Blender 등
        </p>
        <div style="margin-top: 10px">
          <a
            href="/html/about.html"
            style="
              color: #ffffff;
              background-color: #000000;
              text-decoration: none;
              padding: 4px 8px;
              display: inline-block;
            "
            >딥한이력서_VER</a
          >
        </div>
        <div style="border-top: 1px solid #a8a8a8; margin-top: 30px"></div>
      </section>

      <section class="nav-section" style="margin: 30px 0">
        <h3
          style="
            font-size: 1rem;
            color: #000000;
            margin: 0 0 10px 0;
            padding-bottom: 5px;
            font-weight: normal;
          "
        >
          Portfolio Section 1
        </h3>
        <ul
          id="post-list"
          style="list-style: none; padding: 0; margin: 0; margin-left: 0"
        >
          <li style="padding: 8px; color: #000000">로딩 중...</li>
        </ul>

        <div style="margin-top: 0">
          <a
            href="/html/3Dview.html"
            style="
              color: #000000;
              text-decoration: none;
              cursor: pointer;
              padding: 2px 0;
              display: block;
            "
            >→ 3D 모델링</a
          >
        </div>

        <div style="border-top: 1px solid #a8a8a8; margin-top: 30px"></div>

        <h3
          style="
            font-size: 1rem;
            color: #000000;
            margin: 15px 0 10px 0;
            padding-bottom: 5px;
            font-weight: normal;
          "
        >
          Portfolio Section 2
        </h3>
        <div style="margin-top: 0">
          <a
            href="/html/horsegame.html"
            style="
              color: #000000;
              text-decoration: none;
              cursor: pointer;
              padding: 2px 0;
              display: block;
            "
            >→ 경마 시뮬레이터</a
          >
          <a
            href="/html/ddolgame.html"
            style="
              color: #000000;
              text-decoration: none;
              cursor: pointer;
              padding: 2px 0;
              display: block;
            "
            >→ 달려라 똘배!</a
          >
          <a
            href="/html/slot_index.html"
            style="
              color: #000000;
              text-decoration: none;
              cursor: pointer;
              padding: 2px 0;
              display: block;
            "
            >→ 지옥의 슬롯머신</a
          >
        </div>
        <div style="border-top: 1px solid #a8a8a8; margin-top: 30px"></div>
      </section>

      <section class="nav-section" style="margin-bottom: 0">
        <div style="display: flex; gap: 20px; align-items: center">
          <a
            href="https://www.youtube.com/@boolbang"
            target="_blank"
            style="color: #000000; text-decoration: none"
            >유튜브</a
          >
          <a
            href="https://www.instagram.com/postboolbang"
            target="_blank"
            style="color: #000000; text-decoration: none"
            >인스타그램</a
          >
        </div>
      </section>

      <footer
        style="
          margin-top: 30px;
          padding-top: 20px;
          border-top: 1px solid #a8a8a8;
          text-align: center;
          font-size: 0.85rem;
          color: #808080;
        "
      >
        © 2016–2025 BoolBang Interactive. Site launched in 2025. All rights
        reserved.
      </footer>
    </div>

    <div id="modal" class="modal">
      <div class="modal-content">
        <h2 id="modalTitle" style="color: #0000aa"></h2>
        <p id="modalDate" style="color: #808080; font-size: 0.9rem"></p>
        <p id="modalContent"></p>
        <div id="modalImage"></div>
        <div style="text-align: center; margin-top: 20px; margin-bottom: 40px">
          <button id="closeButton">닫기</button>
        </div>
      </div>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
      import {
        getFirestore,
        collection,
        getDocs,
        doc,
        getDoc,
      } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

      import { firebaseConfig } from "/js/firebase-config.js";
      import { parseMedia } from "/js/utils.js";

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      const modal = document.getElementById("modal");
      const modalTitle = document.getElementById("modalTitle");
      const modalDate = document.getElementById("modalDate");
      const modalContent = document.getElementById("modalContent");
      const modalImage = document.getElementById("modalImage");
      const closeButton = document.getElementById("closeButton");

      function closeModal() {
        modal.style.display = "none";
        if (window.location.hash === "#modal") {
          history.back();
        }
      }

      closeButton.addEventListener("click", closeModal);

      modal.addEventListener("click", (e) => {
        if (e.target === modal) {
          closeModal();
        }
      });

      window.addEventListener("popstate", (e) => {
        if (modal.style.display === "block") {
          modal.style.display = "none";
        }
      });

      // parseMedia 함수는 utils.js에서 import

      async function showPostModal(postId) {
        try {
          const docRef = doc(db, "posts", postId);
          const docSnap = await getDoc(docRef);

          if (docSnap.exists()) {
            const postData = docSnap.data();
            let title = postData.title || "제목 없음";
            title = title.replace(/\[WORKS\]/gi, "").trim();
            modalTitle.textContent = title;
            modalDate.textContent = postData.date || "";

            const rawContent = postData.content || "";
            modalContent.innerHTML = parseMedia(rawContent);

            modalImage.innerHTML = "";

            if (Array.isArray(postData.images) && postData.images.length > 0) {
              postData.images.forEach((url) => {
                const img = document.createElement("img");
                img.src = url;
                img.loading = "lazy";
                img.style.maxWidth = "100%";
                img.style.height = "auto";
                img.style.display = "block";
                img.style.margin = "10px auto";
                modalImage.appendChild(img);
              });
            } else if (postData.image) {
              const img = document.createElement("img");
              img.src = postData.image;
              img.loading = "lazy";
              img.style.maxWidth = "100%";
              img.style.height = "auto";
              img.style.display = "block";
              img.style.margin = "10px auto";
              modalImage.appendChild(img);
            }

            modal.style.display = "block";
            history.pushState({ modal: true }, "", "#modal");
          }
        } catch (e) {
          console.error("게시글 로드 실패:", e);
          alert("게시글을 불러오는데 실패했습니다.");
        }
      }

      async function renderPosts() {
        const list = document.getElementById("post-list");
        list.innerHTML = "";

        try {
          const querySnapshot = await getDocs(collection(db, "posts"));
          if (querySnapshot.empty) {
            list.innerHTML =
              '<li style="padding: 8px; color: #000000;">게시글이 없습니다.</li>';
            return;
          }

          const posts = [];
          querySnapshot.forEach((doc) => {
            const data = doc.data();
            posts.push({
              id: doc.id,
              title: data.title,
              date: data.date || "",
              createdAt: data.createdAt?.seconds || 0,
            });
          });

          posts.sort((a, b) => b.createdAt - a.createdAt);

          posts.forEach((post) => {
            const li = document.createElement("li");
            li.style.cssText = "padding: 2px 0; margin: 0; cursor: pointer;";
            const cleanTitle = post.title.replace(/\[WORKS\]/gi, "").trim();
            li.innerHTML = `
              <a href="#" class="post-link" data-id="${post.id}" style="color: #000000; text-decoration: none; cursor: pointer;">
                → ${cleanTitle}
              </a>
            `;
            list.appendChild(li);
          });

          document.querySelectorAll(".post-link").forEach((link) => {
            link.addEventListener("click", (e) => {
              e.preventDefault();
              const postId = e.target.getAttribute("data-id");
              showPostModal(postId);
            });
          });
        } catch (e) {
          console.error("글 불러오기 실패:", e);
          list.innerHTML =
            '<li style="padding: 8px; color: #000000;">게시글을 불러오는 중 오류가 발생했습니다.</li>';
        }
      }

      window.addEventListener("DOMContentLoaded", renderPosts);
    </script>
  </body>
</html>
